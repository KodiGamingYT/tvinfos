<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1920, user-scalable=no" /> 
    <title>TV System Status</title>
    
    <style>
        /* General styling for TV environment */
        body {
            background-color: #121212;
            color: #ffffff;
            font-family: 'Inter', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 50px 0;
            min-height: 100vh;
        }
        h1 {
            font-size: 4rem;
            margin-bottom: 40px;
            color: #4CAF50; /* Green theme */
        }
        .section-title {
            width: 80%;
            max-width: 1200px;
            font-size: 2.5rem;
            color: #4CAF50;
            border-bottom: 2px solid #222;
            padding-bottom: 10px;
            margin: 40px 0 20px 0;
            text-align: left;
        }
        .dashboard-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            width: 80%;
            max-width: 1200px;
        }
        .card {
            background-color: #1e1e1e;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }
        .card-title {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #bbbbbb;
        }
        .card-value {
            font-size: 3rem;
            font-weight: 700;
            color: #00bcd4; /* Light blue accent */
        }
        .card-value.small {
            font-size: 2rem;
            word-wrap: break-word;
        }
        .cpu-bar, .storage-bar {
            height: 15px;
            background-color: #333;
            border-radius: 8px;
            margin-top: 15px;
            overflow: hidden;
        }
        .cpu-fill, .storage-fill {
            height: 100%;
            background-color: #ff9800; /* Orange for CPU/Storage */
            transition: width 0.5s ease;
            border-radius: 8px;
        }

        /* Tizen API Checkbox Style */
        #tizen-api-check {
            font-size: 1.5rem;
            margin-bottom: 20px;
            padding: 10px 20px;
            border-radius: 8px;
            background-color: #F44336; /* Default to Red until checked */
            color: #fff;
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        /* Remote instruction footer */
        .footer {
            margin-top: 50px;
            font-size: 1.2rem;
            color: #777;
        }
    </style>
    
    <!-- FIX: MANUALLY INJECT TIZEN WEB APIS -->
    <script type="text/javascript" src="$WEBAPIS/webapis/webapis.js"></script>

    <script>
        // Check 1: Inline check to see if Tizen object exists when the HTML finishes loading
        window.addEventListener('load', function() {
            var checkElement = document.getElementById('tizen-api-check');
            if (typeof tizen === 'object' && typeof tizen.systeminfo === 'object') {
                checkElement.textContent = "Tizen API: SUCCESS (Object Found)";
                checkElement.style.backgroundColor = '#4CAF50'; /* Green */
            } else {
                checkElement.textContent = "Tizen API: FAILED (Object Missing)";
                checkElement.style.backgroundColor = '#F44336'; /* Red */
            }
        });
    </script>
</head>
<body onload="SystemDashboard.init();">
    <div id="tizen-api-check">Performing Tizen API check...</div>
    <h1>Tizen TV Health Monitor</h1>
    
    <div class="section-title">General Info & Platform</div>
    <div class="dashboard-container">
        <!-- 1. Model & Platform -->
        <div class="card">
            <div class="card-title">Model Name / Tizen Version</div>
            <div class="card-value small" id="model-name">Loading...</div>
            <div class="card-value small" id="tizen-version"></div>
        </div>

        <!-- 2. Display Resolution -->
        <div class="card">
            <div class="card-title">Display Resolution</div>
            <div class="card-value" id="display-resolution">Loading...</div>
        </div>
    </div>
    
    <div class="section-title">Performance & Resources</div>
    <div class="dashboard-container">
        <!-- 3. CPU Load -->
        <div class="card">
            <div class="card-title">CPU Load (Usage)</div>
            <div class="card-value" id="cpu-load">--%</div>
            <div class="cpu-bar">
                <div class="cpu-fill" id="cpu-fill" style="width: 0%;"></div>
            </div>
        </div>
        
        <!-- 4. Memory -->
        <div class="card">
            <div class="card-title">Total Memory (RAM)</div>
            <div class="card-value small" id="memory-total">Loading...</div>
            <div class="card-value small" id="memory-available"></div>
        </div>

        <!-- 5. Network Status -->
        <div class="card">
            <div class="card-title">Network Status</div>
            <div class="card-value small" id="network-status">Loading...</div>
            <div class="card-value small" id="ip-address"></div>
        </div>

        <!-- 6. Storage -->
        <div class="card">
            <div class="card-title">Storage (Internal)</div>
            <div class="card-value small" id="storage-available">Loading...</div>
            <div class="storage-bar">
                <div class="storage-fill" id="storage-fill" style="width: 0%;"></div>
            </div>
        </div>
    </div>

    <div class="footer">
        Data refreshed every 2 seconds. Press Back/Return to exit.
    </div>
    
    <script type="text/javascript" src="$TIZENBREW_JS_URL$"></script>
    <!-- Use a new version number to force a new download -->
    <script type="text/javascript" src="js/main.js?v=1.1.4"></script> 
</body>
</html>


